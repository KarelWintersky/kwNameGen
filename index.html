<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Names generator: prototype</title>
    <meta name="author" lang="ru" content="Karel Wintersky" />
    <meta name="copyright" content="Karel Wintersky">
    <meta name="description" content="Names generator" />
    <meta name="document-state" content="Dynamic" />
    <meta name="generator" content="Handmade" />
    <meta name="resource-type" content="document" />
    <meta name="robots" content="none" />

    <link rel="stylesheet" href="scripts/flags.css">

    <script type="text/javascript" src="scripts/jquery-2.2.4.min.js"></script>
    <script type="text/javascript" src="scripts/engine.js"></script>
    <script type="text/javascript" src="scripts/dictionaries.min.js"></script>

    <script type="text/javascript" id="jq-binds">
        var engine_config = {
            show_hints : true,
        };
        $(document).ready(function () {
            var dictionary;                 // current dictionary
            var current_country_iso_code;   // ISO code

            // gender handler
            var gender = "male";
            $("#select-gender").on('change', function(){
                gender = $(this).val();
            });

            // generate Languages Optionslist
            languages = engine.sortAssocObject(languages, function(a, b) { return (a[1] < b[1] ? -1 : (a[1] > b[1] ? 1 : 0)); });
            Object.keys(languages).map(function(objKey, index) {
                $("#select-language").append( $('<option>', {
                    value : objKey,
                    text  : languages[objKey],
                }) );
            });

            // bind languages selector
            $("#select-language").on('change', function(){
                let dict = $(this).val();
                let text = $(this).find('option:selected').text();
                let actor_generate_name__state = (dict == "null") ? true : false;
                $("#actor-generate-name").prop('disabled', actor_generate_name__state);
                $("#dictionary").html( !actor_generate_name__state ? text : '&nbsp;' );

                dictionary = null;
                dictionary = eval(dict);

                // покажем хинт, установим код страны
                current_country_iso_code
                        = exists( dictionary.config.iso_code)
                        ? dictionary.config.iso_code
                        : 'none';

                if (engine_config.show_hints && exists( dictionary.config.hint )) {
                    $('#display-dictionary-hint').html( dictionary.config.hint).show();
                } else {
                    $('#display-dictionary-hint').html('').hide();
                }
            });

            // bindings
            $("#actor-generate-name").on('click', function(){
                let name = dictionary.getRandomName( gender );
                let output = dictionary.printName( name );

                $("#result").prepend('<span class="flag flag-' + current_country_iso_code + '">' + output + '</span><br>');
            });

            $("#actor-result-reset").on('click', function(){
                $("#result").html('');
            });
        });
    </script>
    <style type="text/css">
        #result {
            border: 0;
            overflow-y: auto;
            max-height: 500px;
            line-height: 150%;
        }
        .dictionary-hint {
            margin-top: 0.5em;
            display: none;
            border: none;
        }
        .nbsp-1rem {
            width: 1rem;
            display: inline-block;
            content: ' ';
        }
        .nbsp-2rem {
            width: 2rem;
            display: inline-block;
            content: ' ';
        }
    </style>
</head>
<body>
    Language:   <select id="select-language"><option value="null"> >> Выбери язык << </option></select>
                <span class="nbsp-2rem"></span>
    Gender:     <select id="select-gender"><option value="male">Male</option><option value="female">Female</option></select>
                <span class="nbsp-2rem"></span>

    <button id="actor-generate-name" disabled>Generate name</button>
    <span class="nbsp-1rem"></span>

    <button id="actor-result-reset">Reset</button>

    <fieldset class="dictionary-hint" id="display-dictionary-hint"></fieldset>

    <fieldset>
        <legend id="dictionary">&nbsp;</legend>
        <div id="result"></div>
    </fieldset>

</body>
</html>